<!DOCTYPE html>
<html>

<head>
  <title>PFL - PRO FANTASY LEAGUE</title>
  <link rel="shortcut icon" type="image/x-icon" href="../pics/favicon_io/favicon-32x32.png" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;200;300&display=swap" rel="stylesheet">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">

  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="../css/style.css" />
</head>

<body>
  <header>
    <div>
      <nav id="mainNavbar" class="navbar navbar-expand-md navbar-light bg-blue">
        <a href="index.html">
          <img src="../pics/logo.png" id="logo" alt="PhotoLogo">
        </a>
        <button class="navbar-toggler" type="button" aria-controls="navLinks" aria-label="toggle navigation"
          data-toggle="collapse" data-target="#navLinks">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navLinks" class="collapse navbar-collapse">
          <ul class="navbar-nav mx-auto"> <!-- Módosítottam ezt az osztályt -->
            <li class="nav-item">
              <a href="index.html" class="nav-link text-right">FŐOLDAL</a>
            </li>
            <li class="nav-item">
              <a href="fantasyligak.html" class="nav-link text-right">FANTASY LIGÁK</a>
            </li>
            <li class="nav-item">
              <a href="hirek.html" class="nav-link text-right">HÍREK</a>
            </li>
            <li class="nav-item">
              <a href="build/index.html" class="nav-link text-right">BLOG</a>
            </li>
          </ul>
        </div>
        <div id="socialLinks" class="navbar-nav">
          <ul class="navbar-nav ml-auto">
            <li>
              <a href="mailto:mate@bmatephoto.hu" target="_blank"><i class="far fa-envelope"></i></a>
            </li>
            <li>
              <a href="https://www.facebook.com/hodpotatofantasy/"><i class="fab fa-facebook"></i></a>
            </li>
            <li>
              <a href="https://www.instagram.com/hotpodtatofantasy/"><i class="fab fa-instagram"></i></a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
  </header>

  <div class="blog-page">
    <div class="container">
      <div class="row" id="blog-post-row">
      </div>
    </div>
  </div>
  <script>
    // Az API URL-je
    const apiUrl = 'http://localhost:3000/news';

    // Függvény az adatok lekéréséhez az API-ról
    async function fetchBlogPosts() {
      try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        return data;
      } catch (error) {
        console.log('Hiba történt az adatok lekérdezése során:', error);
      }
    }

    // Függvény a bejegyzések megjelenítéséhez az oldalon
    async function displayBlogPosts() {
      const blogPostsContainer = document.getElementById('blog-post-row');
      const blogPosts = await fetchBlogPosts();

      if (blogPosts && blogPosts.length > 0) {
        blogPosts.forEach(post => {
          const postElement = document.createElement('div');
          postElement.setAttribute("class", "blog-post col-lg-4 col-md-6 col-sm-6");
          postElement.innerHTML = `
            <h1>${post.title}</h1>
            <p>${post.content}</p>
            <p>Szerző: ${post.author}</p>
            <p>Dátum: ${post.dates}</p>
          `;
          console.log(postElement);
          //document.body.appendChild(postElement);
          blogPostsContainer.appendChild(postElement);
        });
      } else {
        blogPostsContainer.innerHTML = '<p>Nincsenek elérhető bejegyzések.</p>';
      }
    }

    // Bejegyzések megjelenítése az oldalon
    displayBlogPosts();
  </script>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

</body>

</html>